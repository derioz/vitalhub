(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},8011,e=>{"use strict";e.i(36180);var t=e.i(98925),s=e.i(59141);let a="suggestions";e.s(["SuggestionService",0,{getAll:async()=>{let e=(0,t.query)((0,t.collection)(s.db,a),(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}))},create:async(e,l,r,i)=>{await (0,t.addDoc)((0,t.collection)(s.db,a),{title:e,description:l,authorId:r,authorName:i,status:"PENDING",upvotes:[],createdAt:(0,t.serverTimestamp)()})},toggleVote:async(e,l)=>{let r=(0,t.doc)(s.db,a,e);await (0,t.runTransaction)(s.db,async e=>{let s=await e.get(r);if(!s.exists())throw"Document does not exist!";(s.data().upvotes||[]).includes(l)?e.update(r,{upvotes:(0,t.arrayRemove)(l)}):e.update(r,{upvotes:(0,t.arrayUnion)(l)})})},updateStatus:async(e,l)=>{let r=(0,t.doc)(s.db,a,e);await (0,t.updateDoc)(r,{status:l})}}])},14714,e=>{"use strict";var t=e.i(18050),s=e.i(71645),a=e.i(8011),l=e.i(43412),r=e.i(75157),i=e.i(75254);let d=(0,i.default)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]),c=(0,i.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var n=e.i(73884);let o=(0,i.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function u({refreshTrigger:e}){let{user:i,userData:u}=(0,l.useAuth)(),[x,m]=(0,s.useState)([]),[h,b]=(0,s.useState)(!0),p=u?.roles?.some(e=>["role_owner","role_head_admin","role_admin"].includes(e));(0,s.useEffect)(()=>{g()},[e]);let g=async()=>{b(!0);try{let e=await a.SuggestionService.getAll();m(e)}catch(e){console.error(e)}finally{b(!1)}},f=async e=>{if(i)try{await a.SuggestionService.toggleVote(e,i.uid),g()}catch(e){console.error(e)}},y=async(e,t)=>{confirm(`Mark as ${t}?`)&&(await a.SuggestionService.updateStatus(e,t),g())};return h?(0,t.jsx)("div",{className:"text-slate-500 p-4",children:"Loading ideas..."}):(0,t.jsxs)("div",{className:"grid gap-4",children:[x.map(e=>{let s=!!i&&e.upvotes.includes(i.uid);return(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-slate-800 bg-slate-900/40 flex gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>f(e.id),className:(0,r.cn)("p-2 rounded-lg transition-all",s?"bg-brand-start/20 text-brand-start":"bg-slate-800 text-slate-500 hover:bg-slate-700 hover:text-slate-300"),children:(0,t.jsx)(d,{className:(0,r.cn)("h-5 w-5",s&&"fill-current")})}),(0,t.jsx)("span",{className:"font-bold text-slate-200",children:e.upvotes.length})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white text-lg",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:["by ",e.authorName," â€¢ ",e.createdAt?.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"Just now"]})]}),(0,t.jsx)("div",{className:(0,r.cn)("px-2 py-0.5 rounded-full text-xs font-medium border","APPROVED"===e.status?"bg-green-500/10 text-green-400 border-green-500/20":"DENIED"===e.status?"bg-red-500/10 text-red-400 border-red-500/20":"IMPLEMENTED"===e.status?"bg-blue-500/10 text-blue-400 border-blue-500/20":"bg-slate-500/10 text-slate-400 border-slate-500/20"),children:e.status})]}),(0,t.jsx)("p",{className:"text-slate-300 whitespace-pre-wrap",children:e.description}),p&&(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-2 mt-2 border-t border-slate-800/50",children:[(0,t.jsx)("span",{className:"text-xs text-slate-500 uppercase tracking-wider font-medium",children:"Admin:"}),(0,t.jsx)("button",{onClick:()=>y(e.id,"APPROVED"),className:"p-1 text-green-500 hover:bg-green-900/20 rounded",title:"Approve",children:(0,t.jsx)(c,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>y(e.id,"DENIED"),className:"p-1 text-red-500 hover:bg-red-900/20 rounded",title:"Deny",children:(0,t.jsx)(n.XCircle,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>y(e.id,"IMPLEMENTED"),className:"p-1 text-blue-500 hover:bg-blue-900/20 rounded",title:"Implemented",children:(0,t.jsx)(o,{className:"h-4 w-4"})})]})]})]},e.id)}),0===x.length&&(0,t.jsx)("div",{className:"text-center py-12 text-slate-500",children:"No suggestions yet. Be the first!"})]})}var x=e.i(37727),m=e.i(41240);function h({isOpen:e,onClose:r,onSuccess:i}){let{user:d}=(0,l.useAuth)(),[c,n]=(0,s.useState)(!1),[o,u]=(0,s.useState)({title:"",description:""});if(!e)return null;let h=async e=>{if(e.preventDefault(),d){n(!0);try{await a.SuggestionService.create(o.title,o.description,d.uid,d.displayName||"User"),i(),r()}catch(e){console.error(e),alert("Failed to submit suggestion")}finally{n(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-xl border border-slate-800 bg-slate-900 shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800 p-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)(m.Lightbulb,{className:"h-5 w-5 text-brand-start"}),"Submit Suggestion"]}),(0,t.jsx)("button",{onClick:r,className:"text-slate-400 hover:text-white",children:(0,t.jsx)(x.X,{className:"h-5 w-5"})})]}),(0,t.jsxs)("form",{onSubmit:h,className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Title"}),(0,t.jsx)("input",{required:!0,className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-white focus:border-brand-start focus:outline-none",value:o.title,onChange:e=>u({...o,title:e.target.value}),placeholder:"e.g. New Police Cars"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Description"}),(0,t.jsx)("textarea",{required:!0,className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-white focus:border-brand-start focus:outline-none h-32",value:o.description,onChange:e=>u({...o,description:e.target.value}),placeholder:"Describe your idea..."})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-slate-300 hover:text-white",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"rounded-md bg-brand-end px-4 py-2 text-sm font-medium text-white hover:bg-orange-500 disabled:opacity-50",children:c?"Submitting...":"Submit Idea"})]})]})]})})}var b=e.i(7233);function p(){let[e,a]=(0,s.useState)(!1),[l,r]=(0,s.useState)(0);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Suggestions"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Vote on community ideas."})]}),(0,t.jsxs)("button",{onClick:()=>a(!0),className:"flex items-center gap-2 rounded-md bg-gradient-to-r from-brand-start to-brand-end px-4 py-2 text-sm font-medium text-white hover:brightness-110",children:[(0,t.jsx)(b.Plus,{className:"h-4 w-4"}),"Submit Idea"]})]}),(0,t.jsx)(u,{refreshTrigger:l}),(0,t.jsx)(h,{isOpen:e,onClose:()=>a(!1),onSuccess:()=>r(e=>e+1)})]})}e.s(["default",()=>p],14714)}]);