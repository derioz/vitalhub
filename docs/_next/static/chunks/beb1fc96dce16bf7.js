(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},11698,e=>{"use strict";e.i(36180);var t=e.i(98925),a=e.i(59141);let s="wiki_documents";e.s(["WikiService",0,{getAllDocs:async()=>{let e=(0,t.query)((0,t.collection)(a.db,s),(0,t.orderBy)("title","asc"));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}))},getDoc:async e=>{let i=(0,t.doc)(a.db,s,e),r=await (0,t.getDoc)(i);return r.exists()?{id:r.id,...r.data()}:null},createDoc:async(e,i,r,l)=>{await (0,t.addDoc)((0,t.collection)(a.db,s),{title:e,category:i,content:r,lastUpdatedBy:l,isPinned:!1,createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()})},updateDoc:async(e,i,r)=>{let l=(0,t.doc)(a.db,s,e);await (0,t.updateDoc)(l,{...i,lastUpdatedBy:r,updatedAt:(0,t.serverTimestamp)()})},getAnnouncements:async()=>{let e=(0,t.query)((0,t.collection)(a.db,s),(0,t.where)("category","==","ANNOUNCEMENT"),(0,t.orderBy)("createdAt","desc"),(0,t.limit)(5));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}))}}])},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},35413,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(11698),i=e.i(43412),r=e.i(71689);let l=(0,e.i(75254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var d=e.i(56909),n=e.i(37727),c=e.i(22016),o=e.i(18789),u=e.i(18566);function x({id:e}){let{user:x}=(0,i.useAuth)();(0,u.useRouter)();let[m,h]=(0,a.useState)(null),[p,y]=(0,a.useState)(!0),[v,b]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[w,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{N()},[e]);let N=async()=>{y(!0);try{let t=await s.WikiService.getDoc(e);h(t),t&&f(t.content)}catch(e){console.error(e)}finally{y(!1)}},k=async()=>{if(m&&x){j(!0);try{await s.WikiService.updateDoc(m.id,{content:g},x.displayName||"User"),h(e=>e?{...e,content:g}:null),b(!1)}catch(e){console.error(e),alert("Failed to save")}finally{j(!1)}}};return p?(0,t.jsx)("div",{className:"p-8 text-slate-500",children:"Loading document..."}):m?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(c.default,{href:"/dashboard/wiki",className:"p-2 rounded-full hover:bg-slate-800 text-slate-400 hover:text-white transition-colors",children:(0,t.jsx)(r.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-white",children:m.title}),(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:["Category: ",m.category," â€¢ Last updated by ",m.lastUpdatedBy]})]})]}),(0,t.jsx)("div",{children:v?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>b(!1),className:"flex items-center gap-2 px-3 py-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[(0,t.jsx)(n.X,{className:"h-4 w-4"}),"Cancel"]}),(0,t.jsxs)("button",{onClick:k,disabled:w,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-500 transition-colors text-sm font-medium disabled:opacity-50",children:[(0,t.jsx)(d.Save,{className:"h-4 w-4"}),w?"Saving...":"Save Changes"]})]}):(0,t.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 bg-brand-start/10 text-brand-start border border-brand-start/20 rounded-md hover:bg-brand-start/20 transition-colors text-sm font-medium",children:[(0,t.jsx)(l,{className:"h-4 w-4"}),"Edit Content"]})})]}),(0,t.jsx)("div",{className:"bg-slate-900/40 border border-slate-800 rounded-xl p-8 min-h-[500px]",children:v?(0,t.jsx)("textarea",{className:"w-full h-[600px] bg-transparent text-slate-200 font-mono text-sm focus:outline-none resize-y",value:g,onChange:e=>f(e.target.value)}):(0,t.jsx)("div",{className:"prose prose-invert max-w-none prose-headings:text-brand-start prose-a:text-brand-end prose-strong:text-white",children:(0,t.jsx)(o.default,{children:m.content})})})]}):(0,t.jsx)("div",{className:"p-8 text-red-500",children:"Document not found."})}e.s(["WikiArticleClient",()=>x],35413)}]);