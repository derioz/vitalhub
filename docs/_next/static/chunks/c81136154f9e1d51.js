(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},92050,e=>{"use strict";e.i(36180);var t=e.i(98925),a=e.i(59141);e.s(["UserService",0,{createUser:async(e,s)=>{let l=(0,t.doc)(a.db,"users",e);await (0,t.setDoc)(l,{...s,id:e,createdAt:(0,t.serverTimestamp)(),lastLoginAt:(0,t.serverTimestamp)(),status:"ACTIVE",roles:s.roles||["role_vital_member"]},{merge:!0})},getUser:async e=>{let s=(0,t.doc)(a.db,"users",e),l=await (0,t.getDoc)(s);return l.exists()?{id:l.id,...l.data()}:null},getAllUsers:async()=>{let e=(0,t.query)((0,t.collection)(a.db,"users"),(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}))},getRoles:async()=>{let e=(0,t.query)((0,t.collection)(a.db,"roles"),(0,t.orderBy)("order","asc"));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}))},updateUserRoles:async(e,s)=>{let l=(0,t.doc)(a.db,"users",e);await (0,t.updateDoc)(l,{roles:s})},updateProfile:async(e,s)=>{let l=(0,t.doc)(a.db,"users",e);await (0,t.setDoc)(l,s,{merge:!0})},getStaffMembers:async()=>{let e=(0,t.query)((0,t.collection)(a.db,"users")),s=await (0,t.getDocs)(e),l=["role_support","role_sr_support","role_mod","role_sr_mod","role_admin","role_head_admin","role_owner","role_developer"];return s.docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.roles?.some(e=>l.includes(e)))}}])},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},97251,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(43412);e.i(61086);var l=e.i(27215),r=e.i(59141);let i=async(e,t)=>{let a=(0,l.ref)(r.storage,e),s=await (0,l.uploadBytes)(a,t);return await (0,l.getDownloadURL)(s.ref)};var d=e.i(92050);e.i(51718);var o=e.i(18357);let c=(0,e.i(75254).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var n=e.i(56909),u=e.i(31278),m=e.i(84614);function p(){let{user:e,userData:l}=(0,s.useAuth)(),[p,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[v,b]=(0,a.useState)(""),[y,g]=(0,a.useState)(null),[j,w]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&(b(e.displayName||""),w(e.photoURL||""))},[e]);let N=async t=>{if(t.preventDefault(),e){x(!0),f("");try{let t=e.photoURL;if(y){let a=y.name.split(".").pop(),s=`avatars/${e.uid}/${Date.now()}.${a}`;t=await i(s,y)}r.auth.currentUser&&await (0,o.updateProfile)(r.auth.currentUser,{displayName:v,photoURL:t}),await d.UserService.updateProfile(e.uid,{name:v,photoURL:t||void 0}),f("Profile updated successfully!")}catch(e){console.error(e),alert("Failed to update profile")}finally{x(!1)}}};return e?(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Profile Settings"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Manage your account details and appearance."})]}),(0,t.jsx)("div",{className:"p-6 rounded-xl border border-slate-800 bg-slate-900/50",children:(0,t.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,t.jsx)("div",{className:"h-24 w-24 rounded-full overflow-hidden border-2 border-slate-700 bg-slate-800",children:j?(0,t.jsx)("img",{src:j,className:"h-full w-full object-cover",alt:"Avatar"}):(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center text-slate-500",children:(0,t.jsx)(m.User,{className:"h-10 w-10"})})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)(c,{className:"h-6 w-6 text-white"})}),(0,t.jsx)("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];g(t),w(URL.createObjectURL(t))}}})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Click to upload new avatar"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Display Name"}),(0,t.jsx)("input",{type:"text",required:!0,value:v,onChange:e=>b(e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-white focus:border-brand-start focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-400",children:"Email"}),(0,t.jsx)("input",{type:"text",disabled:!0,value:e.email||"",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-500 cursor-not-allowed"})]}),(0,t.jsxs)("div",{className:"pt-2",children:[(0,t.jsxs)("button",{type:"submit",disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-brand-end text-white rounded-md hover:bg-orange-500 disabled:opacity-50 font-medium",children:[p?(0,t.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(n.Save,{className:"h-4 w-4"}),p?"Saving...":"Save Changes"]}),h&&(0,t.jsx)("p",{className:"text-green-400 text-sm mt-2",children:h})]})]})})]}):null}e.s(["default",()=>p],97251)}]);